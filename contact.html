<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>contact - John Patrick Amata</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="eagle.png" sizes="any" />
    <link
      href="https://fonts.googleapis.com/css2?family=STIX+Two+Text:ital,wght@0,400..700;1,400..700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="page-container">
      <div id="column-left"></div>
      <div id="column-center">
        <h1 style="font-family: 'STIX Two Text', serif; font-style: italic">
          contact
        </h1>
        <ul>
          <li id="myText" onclick="changeText()">
            âž  [<i>click to view email </i>]
          </li>
          <li>
            instagram: <a href="https://www.instagram.com/jpamata/">@jpamata</a>
          </li>
        </ul>
        <img
          src="https://assets.leetcode.com/users/xjpa/avatar_1730381867.png"
          alt="me"
          style="max-width: 220px; height: auto; margin-top: 1.5em"
        />

        <p class="section" style="margin-top: 2em">
          <a href="./">home</a> | <a href="move">move</a> |
          <a href="./w">words</a> |
          <a href="projects">projects</a>
        </p>
      </div>
      <div id="column-right"></div>
    </div>
  </body>
</html>

<script>
  function changeText() {
    const studentEmail = decryptCaesarCipher(
      'nslr_texvmgo_eqexe@hpwy.ihy.tl',
      4
    );
    const otherEmail = decryptCaesarCipher('n@nslreqexe.gsq', 4);

    document.getElementById('myText').innerHTML = `
    <p>Previously: <i>${otherEmail}</i></p>
    <p>Now I visit that email less but...</p>
    <p>Everyday I check my uni's email more:</p>
    <p><i>${studentEmail}</i></p>`;
  }

  function decryptCaesarCipher(str, shift) {
    shift = ((shift % 26) + 26) % 26;
    let result = '';
    for (let i = 0; i < str.length; i++) {
      let charCode = str.charCodeAt(i);
      if (charCode >= 65 && charCode <= 90) {
        let letterValue = charCode - 65;
        letterValue = (letterValue - shift + 26) % 26;
        charCode = letterValue + 65;
      } else if (charCode >= 97 && charCode <= 122) {
        let letterValue = charCode - 97;
        letterValue = (letterValue - shift + 26) % 26;
        charCode = letterValue + 97;
      }
      result += String.fromCharCode(charCode);
    }
    return result;
  }

  document.addEventListener('DOMContentLoaded', function () {
    const toggleDetailsElements = document.querySelectorAll('.toggle-details');

    toggleDetailsElements.forEach(function (toggleDetails) {
      toggleDetails.addEventListener('click', function () {
        const expandingDetails = toggleDetails.parentElement.nextElementSibling;

        if (expandingDetails.classList.contains('active')) {
          expandingDetails.classList.remove('active');
          return;
        }
        closeAllDetails();
        expandingDetails.classList.add('active');
      });
    });
  });

  function closeAllDetails() {
    const allExpandingDetails = document.querySelectorAll(
      '.expanding-details.active'
    );
    allExpandingDetails.forEach(function (detail) {
      detail.classList.remove('active');
    });
  }
</script>
